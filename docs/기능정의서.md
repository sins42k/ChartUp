# ChartUp 기능정의서 v3.0

## MVP (8월 완성 목표)

### 1. 파일 업로드 시스템

**기능 개요**: 사용자 데이터 파일을 안전하고 효율적으로 업로드하는 시스템

#### 지원 파일 형식

- **CSV** (.csv): 가장 일반적인 데이터 형식
- **Excel** (.xlsx, .xls): 비즈니스 환경에서 많이 사용

#### 업로드 프로세스

1. **파일 선택**: HTML input type="file" 사용
2. **형식 검증**: 확장자 및 MIME 타입 체크
3. **크기 제한**: MVP 단계 10MB 이하
4. **에러 처리**: 부적절한 파일 시 Alert 창 표시

#### 기술적 구현 (클라이언트사이드)

```javascript
// 파일 검증 로직 예시
const validateFile = (file) => {
  const allowedTypes = ['.csv', '.xlsx', '.xls'];
  const maxSize = 10 * 1024 * 1024; // 10MB
  
  if (!allowedTypes.includes(file.extension)) {
    alert('지원하지 않는 파일 형식입니다.');
    return false;
  }
  
  if (file.size > maxSize) {
    alert('파일 크기가 10MB를 초과합니다.');
    return false;
  }
  
  return true;
};
```

---

### 2. 파일 파싱 및 데이터 처리

**기능 개요**: 업로드된 파일을 분석하여 차트 생성에 적합한 데이터 구조로 변환

#### 파싱 라이브러리

- **CSV**: PapaParse 또는 내장 JavaScript
- **Excel**: SheetJS (xlsx 라이브러리)

#### 데이터 처리 로직

1. **헤더 자동 인식**
    
    - 첫 번째 행이 헤더인지 자동 판단
    - 데이터 타입 분석 (문자열, 숫자, 날짜)
2. **데이터 검증**
    
    - 빈 셀 처리 (null, undefined, 빈 문자열)
    - 데이터 타입 통일성 체크
    - 이상값 필터링
3. **차트 매핑 준비**
    
    - Recharts 형식에 맞는 데이터 구조 변환
    - X축, Y축 데이터 분리
    - 카테고리별 그룹핑

#### 구현 예시

```javascript
const processDataForChart = (rawData) => {
  // 헤더 추출
  const headers = rawData[0];
  const dataRows = rawData.slice(1);
  
  // Recharts 형식으로 변환
  return dataRows.map(row => {
    const dataPoint = {};
    headers.forEach((header, index) => {
      dataPoint[header] = row[index];
    });
    return dataPoint;
  });
};
```

---

### 3. Recharts 기반 차트 생성

**기능 개요**: 처리된 데이터를 Recharts 라이브러리로 시각화

#### 지원 차트 유형 (우선순위)

1. **막대 그래프 (BarChart)**
    
    - **용도**: 카테고리별 수치 비교
    - **데이터 요구사항**: 카테고리명 + 수치값
    - **Recharts 컴포넌트**: `<BarChart>`, `<Bar>`, `<XAxis>`, `<YAxis>`
2. **꺾은선 그래프 (LineChart)**
    
    - **용도**: 시간별 변화 추이 표현
    - **데이터 요구사항**: 시계열 데이터 (날짜/시간 + 수치값)
    - **Recharts 컴포넌트**: `<LineChart>`, `<Line>`, `<XAxis>`, `<YAxis>`

#### 자동 차트 선택 로직

```javascript
const selectChartType = (data, headers) => {
  // 날짜/시간 컬럼이 있으면 LineChart
  const hasTimeColumn = headers.some(header => 
    isDateColumn(data, header)
  );
  
  if (hasTimeColumn) {
    return 'LineChart';
  }
  
  // 기본적으로 BarChart
  return 'BarChart';
};
```

#### 기본 스타일링

- **색상**: ChartUp 브랜드 컬러 (추후 결정)
- **폰트**: 시스템 기본 폰트
- **크기**: 반응형 (컨테이너에 맞춤)
- **애니메이션**: Recharts 기본 애니메이션 활용

#### 구현 예시

```jsx
// 막대 그래프 컴포넌트
const ChartUpBarChart = ({ data }) => {
  return (
    <ResponsiveContainer width="100%" height={400}>
      <BarChart data={data}>
        <CartesianGrid strokeDasharray="3 3" />
        <XAxis dataKey="category" />
        <YAxis />
        <Tooltip />
        <Bar dataKey="value" fill="#8884d8" />
      </BarChart>
    </ResponsiveContainer>
  );
};
```

---

### 4. 차트 다운로드 기능

**기능 개요**: 생성된 차트를 이미지 파일로 다운로드

#### 지원 형식

- **PNG**: 고화질, 투명 배경 지원
- **JPG**: 일반 화질, 작은 파일 크기

#### 기술적 구현

- **html2canvas**: React 컴포넌트를 Canvas로 변환
- **FileSaver.js**: 브라우저 다운로드 트리거

#### 다운로드 옵션

- **해상도**: 1920x1080 (기본값)
- **파일명**: 자동 생성 (차트타입_날짜시간.확장자)
- **품질**: PNG(최고품질), JPG(80% 품질)

#### 구현 예시

```javascript
const downloadChart = async (chartRef, filename, format) => {
  const canvas = await html2canvas(chartRef.current);
  const link = document.createElement('a');
  
  if (format === 'png') {
    link.href = canvas.toDataURL('image/png');
  } else {
    link.href = canvas.toDataURL('image/jpeg', 0.8);
  }
  
  link.download = `${filename}.${format}`;
  link.click();
};
```

---

## Beta 기능 (9-10월 개발 예정)

### 1. 사용자 인증 시스템

- **Firebase Auth** 연동
- 소셜 로그인 (Google, GitHub)
- 사용자별 파일 이력 관리
- 생성한 차트 저장 기능

### 2. 고급 스타일링 기능

- **차트 커스터마이징**
    - 색상 팔레트 선택
    - 폰트 변경
    - 차트 크기 조정
- **브랜딩 옵션**
    - 로고 삽입
    - 워터마크 추가
    - 템플릿 시스템

### 3. 확장 차트 유형

- **원 그래프** (PieChart): 비율 표현
- **분포도** (ScatterChart): 상관관계 분석
- **영역 차트** (AreaChart): 누적 데이터 표현

### 4. AI 어시스턴트 서비스

- **데이터 분석 제안**
    - 최적 차트 유형 추천
    - 데이터 인사이트 제공
- **사용자 가이드**
    - 웹사이트 이용법 안내
    - 데이터 준비 가이드

---

## 기술적 제약사항 및 고려사항

### MVP 단계 제약사항

- **편집 기능 없음**: 사용자는 파일 업로드만 가능
- **기본 스타일만**: 색상, 폰트 등 커스터마이징 불가
- **클라이언트 처리**: 대용량 파일 처리 한계
- **차트 2개만**: 막대, 꺾은선 그래프만 지원

### 성능 최적화 방안

- **React.memo**: 불필요한 리렌더링 방지
- **useMemo**: 데이터 처리 결과 캐싱
- **Lazy Loading**: 차트 컴포넌트 지연 로딩
- **파일 크기 제한**: 초기 10MB로 제한

### 에러 처리 전략

- **사용자 친화적 메시지**: 기술적 오류를 쉬운 언어로 설명
- **단계별 검증**: 업로드 → 파싱 → 차트 생성 각 단계에서 검증
- **복구 방안**: 오류 발생 시 이전 단계로 돌아가기

### 브라우저 호환성

- **모던 브라우저**: Chrome, Firefox, Safari, Edge 최신 버전
- **JavaScript ES6+**: 최신 JavaScript 문법 활용
- **Responsive**: 모바일, 태블릿, 데스크톱 대응